<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using the Tesseract OCR engine in R • cpp11tesseract</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using the Tesseract OCR engine in R">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cpp11tesseract</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/intro.html">Using the Tesseract OCR engine in R</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pachadotdev/cpp11tesseract/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="intro_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Using the Tesseract OCR engine in R</h1>
            
            <h4 data-toc-skip class="date">2024-12-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/pachadotdev/cpp11tesseract/blob/HEAD/vignettes/intro.Rmd" class="external-link"><code>vignettes/intro.Rmd</code></a></small>
      <div class="d-none name"><code>intro.Rmd</code></div>
    </div>

    
    
<p>The tesseract package provides R bindings <a href="https://github.com/tesseract-ocr/tesseract" class="external-link">Tesseract</a>: a powerful optical character recognition (OCR) engine that supports over 100 languages. The engine is highly configurable in order to tune the detection algorithms and obtain the best possible results.</p>
<p>Keep in mind that OCR (pattern recognition in general) is a very difficult problem for computers. Results will rarely be perfect and the accuracy rapidly decreases with the quality of the input image. But if you can get your input images to reasonable quality, Tesseract can often help to extract most of the text from the image.</p>
<div class="section level2">
<h2 id="extract-text-from-images">Extract Text from Images<a class="anchor" aria-label="anchor" href="#extract-text-from-images"></a>
</h2>
<p>OCR is the process of finding and recognizing text inside images, for example from a screenshot, scanned paper. The image below has some example text:</p>
<div class="figure">
<img src="../reference/figures/wilde.jpg" alt=""><p class="caption">Image with eight lines of English text</p>
</div>
<p>The <code><a href="../reference/ocr.html">ocr()</a></code> function extracts text from an image file. After indicating the engine for the language, it will return the text found in the image:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pacha.dev/cpp11tesseract/" class="external-link">cpp11tesseract</a></span><span class="op">)</span></span>
<span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"wilde.jpg"</span>, package <span class="op">=</span> <span class="st">"cpp11tesseract"</span><span class="op">)</span></span>
<span><span class="va">eng</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tesseract.html">tesseract</a></span><span class="op">(</span><span class="st">"eng"</span><span class="op">)</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">file</span>, engine <span class="op">=</span> <span class="va">eng</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Act One</span></span>
<span><span class="co">## [The living room of Algernon Moncrieff's flat in Mayfair, London.</span></span>
<span><span class="co">## Lane is arranging afternoon tea on a table. Algemion enters}</span></span>
<span><span class="co">## Algernon: Lane, have you made the cucumber sandwiches for</span></span>
<span><span class="co">## Lady Bracknell’s tea?</span></span>
<span><span class="co">## Lane: Yes, sir. [Handing them to Algernon on a silver tray]</span></span>
<span><span class="co">## Algernon: [Looking carefully at them, taking two and sitting down</span></span>
<span><span class="co">## on the sofa] Oh, by the way’, Lane, I looked at your notebook. |</span></span>
<span><span class="co">## noticed that when Lord Shoreman and Mr Worthing dined with</span></span>
<span><span class="co">## me on Thursday night, eight bottles of champagne were drunk,</span></span>
<span><span class="co">## Lane: Yes, sir; eight bottles.</span></span>
<span><span class="co">## Algernon: Why is it that, in a bachelor’s home, the servants</span></span>
<span><span class="co">## always drink the champagne? I just ask because | am interested,</span></span>
<span><span class="co">## Lane.</span></span>
<span><span class="co">## Lane: I think that it is because the champagne is better in a</span></span>
<span><span class="co">## bachelor’s home. | have noticed that the champagne in married</span></span>
<span><span class="co">## people's homes is rarely very good.</span></span>
<span><span class="co">## Algernon: Good heavens*! Is marriage so depressing?</span></span>
<span><span class="co">## Lane: | believe marriage is very pleasant, sir. | haven't had much</span></span>
<span><span class="co">## experience of it myself. [ have only been married once, and that</span></span>
<span><span class="co">## was because of a misunderstanding” between myself and a young</span></span>
<span><span class="co">## person.</span></span>
<span><span class="co">## Algernon: [Lazily, without interest] I am not very interested in</span></span>
<span><span class="co">## your family life, Lane.</span></span>
<span><span class="co">## Lane: No, sir; it is not a very interesting subject. I never think</span></span>
<span><span class="co">## of it myself.</span></span>
<span><span class="co">## Algernon: That is very understandable. Well, thank you, Lane.</span></span>
<span><span class="co">## [Lane goes off]</span></span>
<span><span class="co">## Algernon: [To himself] Lane’s views on marriage seem very casual.</span></span>
<span><span class="co">## Really, if the servants don’t set us a good example, what on earth</span></span>
<span><span class="co">## is the use of them? They seem to have no morals</span></span>
<span><span class="co">## [Lane enters]</span></span>
<span><span class="co">## Lane: Mr Ernest Worthing is here, sir.</span></span></code></pre>
<p>The <code><a href="../reference/ocr.html">ocr_data()</a></code> function returns all words in the image along with a bounding box and confidence rate.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr_data</a></span><span class="op">(</span><span class="va">file</span>, engine <span class="op">=</span> <span class="va">eng</span><span class="op">)</span></span>
<span><span class="va">results</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 273 × 4</span></span></span>
<span><span class="co">##    word        confidence bbox          stringsAsFactors</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Act               96.7 196,27,231,44 FALSE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> One               96.9 238,27,278,44 FALSE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> [The              68.0 8,70,38,84    FALSE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> living            96.7 46,70,81,87   FALSE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> room              96.1 88,75,120,84  FALSE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> of                96.1 128,70,143,87 FALSE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Algernon          64.6 148,70,208,87 FALSE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Moncrieff's       50.1 216,71,289,88 FALSE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> flat              96.1 296,71,318,88 FALSE           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> in                92.1 325,73,337,85 FALSE           </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 263 more rows</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="language-data">Language Data<a class="anchor" aria-label="anchor" href="#language-data"></a>
</h2>
<p>The tesseract OCR engine uses language-specific training data in the recognize words. The OCR algorithms bias towards words and sentences that frequently appear together in a given language, just like the human brain does. Therefore the most accurate results will be obtained when using training data in the correct language.</p>
<p>Use <code><a href="../reference/tesseract.html">tesseract_info()</a></code> to list the languages that you currently have installed.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tesseract.html">tesseract_info</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $datapath</span></span>
<span><span class="co">## [1] "/usr/share/tesseract-ocr/5/tessdata/"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $available</span></span>
<span><span class="co">## [1] "chi_sim" "eng"     "osd"    </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $version</span></span>
<span><span class="co">## [1] "5.4.1"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $configs</span></span>
<span><span class="co">##  [1] "alto"             "ambigs.train"     "api_config"       "bigram"          </span></span>
<span><span class="co">##  [5] "box.train"        "box.train.stderr" "digits"           "get.images"      </span></span>
<span><span class="co">##  [9] "hocr"             "inter"            "kannada"          "linebox"         </span></span>
<span><span class="co">## [13] "logfile"          "lstm.train"       "lstmbox"          "lstmdebug"       </span></span>
<span><span class="co">## [17] "makebox"          "page"             "pdf"              "quiet"           </span></span>
<span><span class="co">## [21] "rebox"            "strokewidth"      "tsv"              "txt"             </span></span>
<span><span class="co">## [25] "unlv"             "wordstrbox"</span></span></code></pre>
<p>By default the R package only includes English training data. Windows and Mac users can install additional training data using <code><a href="../reference/tessdata.html">tesseract_download()</a></code>. Let’s OCR a screenshot from Wikipedia in Simplified Chinese.</p>
<div class="figure">
<img src="../reference/figures/chinese.jpg" alt=""><p class="caption">Image with thirteen lines of Chinese text</p>
</div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Only need to do download once:</span></span>
<span><span class="fu"><a href="../reference/tessdata.html">tesseract_download</a></span><span class="op">(</span><span class="st">"chi_sim"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Now load the dictionary</span></span>
<span><span class="op">(</span><span class="va">simplified_chinese</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tesseract.html">tesseract</a></span><span class="op">(</span><span class="st">"chi_sim"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;pointer: 0x5793a35aeb80&gt;</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"chinese.jpg"</span>, package <span class="op">=</span> <span class="st">"cpp11tesseract"</span><span class="op">)</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">file</span>, engine <span class="op">=</span> <span class="va">simplified_chinese</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 奥林匹克运动会 (希腊语;: OMXohrtakot AYWvsc; 法语: Jeux olympiques; 英语:</span></span>
<span><span class="co">## Olympic Games) ，简称奥运会、奥运，是世界最高等级的国际综合体育蹇事，由国际</span></span>
<span><span class="co">## 奥林匹克委员会主办，每4年举行一次。冬季训技项目创立冬季奥林匹克运动会后，之前</span></span>
<span><span class="co">## 的奥林匹克运动会则是又称为【夏季奥林匹克还动会」 以示区分。从1994年起，冬季奥</span></span>
<span><span class="co">## 还会和夏季奥运会分并，相隔2年交蔡举行。奥林匹克运动会最早起源於古希腊，是当时</span></span>
<span><span class="co">## 各城邦之间的公开较量，因为皋闪地在奥林匹亚而得名。信幸基晴教的办天皇帝狄奥多西</span></span>
<span><span class="co">## 一世以奥林匹克运动会崇拜耶稣以外神只为由，禁止奥运项技，於是奥运在举办超过</span></span>
<span><span class="co">## 1,000年后於4世纪末停办，奥运这次停办持续了1,503年，直到19世纪未才由和后人发现</span></span>
<span><span class="co">## 遗距。之后，法辆的顾拜旦男超皮耶,德:古柏坦创立了有真正奥运精神的现代奥林匹克运</span></span>
<span><span class="co">## 动会，自1896年开始每4年学办一次，更确立了会期不超过18日的传统。现代奥运会只</span></span>
<span><span class="co">## 在两次世界大战期间合共中断过5次(分别是191 6年夏季奥运会、1940年夏季奥运会</span></span>
<span><span class="co">## D、1940年冬季奥运会(1]、1944年夏季奥运会和1944年冬季奥运会) [广 ]]，以及在</span></span>
<span><span class="co">## 2020年因全球防疫延期过一次 (2020年夏季奥运会2][广习) 。</span></span></code></pre>
<p>Compare with the copy and paste from the Wikipedia.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"chinese.txt"</span>, package <span class="op">=</span> <span class="st">"cpp11tesseract"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 奧林匹克運動會（希臘語：Ολυμπιακοί Αγώνες；法語 Jeux olympiques；英語：Olympic Games）簡稱奧運會、奧運，是世界最高等級的國際綜合體育賽事，由國際 奧林匹克委員會主辦，每4年舉行一次。冬季競技項目創立冬季奧林匹克運動會後，之前 的奧林匹克運動會則是又稱為「夏季奧林匹克運動會」以示區分。從1994年起，冬季奧 運會和夏季奧運會分開，相隔2年交替舉行。奥林匹克運動會最早起源於古希腊，是當時 各城邦之間的公開較量，因為舉辦地在奧林匹亚而得名。信奉基督教的羅馬皇帝狄奧多西 一世以奧林匹克運動會崇拜耶穌以外神衹為由，禁止奧運競技，於是奧運在舉辦超過 1,000年後於4世紀末停辦，奧運這次停辦持續了1,503年，直到19世纪末才由後人發現 遺蹟。之後，法國的顾拜旦男爵皮耶·德·古柏坦創立了有真正奧運精神的現代奧林匹克運 動會，自1896年開始每4年舉辦一次，更確立了會期不超過18日的傳統。現代奧運會只 在兩次世界大戰期間合共中斷過5次（分別是1916年夏季奧運會、1940年夏季奧運會 [1]、1940年冬季奧運會[1]、1944年夏季奧運會和1944年冬季奧運會）[註 1]，以及在 2020年因全球防疫延期過一次（2020年夏季奧運會[2][註 2]）。</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="read-from-pdf-files">Read from PDF files<a class="anchor" aria-label="anchor" href="#read-from-pdf-files"></a>
</h2>
<p>If your images are stored in PDF files they first need to be converted to a proper image format. We can do this in R using the <code>pdf_convert</code> function from the <code>cpp11poppler</code> package. Use a high DPI to keep quality of the image.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pacha.dev/cpp11poppler/" class="external-link">cpp11poppler</a></span><span class="op">)</span></span>
<span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"bondargentina.pdf"</span>, package <span class="op">=</span> <span class="st">"cpp11tesseract"</span><span class="op">)</span></span>
<span><span class="va">pngfile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/cpp11poppler/man/pdf_render_page.html" class="external-link">pdf_convert</a></span><span class="op">(</span><span class="va">file</span>, dpi <span class="op">=</span> <span class="fl">600</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Converting page 1 to bondargentina_1.png...</span></span></code></pre>
<pre><code><span><span class="co">## done.</span></span></code></pre>
<pre><code><span><span class="co">## Converting page 2 to bondargentina_2.png...</span></span></code></pre>
<pre><code><span><span class="co">## done.</span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">pngfile</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## _ LISTING PARTICULARS CONSISTING OF</span></span>
<span><span class="co">## Pricing Supplement, Supplemental Information Memorandum and</span></span>
<span><span class="co">## Supplemental Information Memorandum Addendum dated May 26, 1998</span></span>
<span><span class="co">## AND</span></span>
<span><span class="co">## Information Memorandum Addendum dated October 17, 1997 |</span></span>
<span><span class="co">## ee .</span></span>
<span><span class="co">## THE REPUBLIC OF ARGENTINA</span></span>
<span><span class="co">## Euro 750,000,000 Interest Strip Notes due 2028</span></span>
<span><span class="co">## issued under its</span></span>
<span><span class="co">## U.S.$11,000,000,000</span></span>
<span><span class="co">## EURO MEDIUM-TERM NOTE PROGRAMME |</span></span>
<span><span class="co">## Issue Price: 100.835 per cent.</span></span>
<span><span class="co">## Series No.: 61</span></span>
<span><span class="co">## Tranche No.: 01 :</span></span>
<span><span class="co">## Dealer</span></span>
<span><span class="co">## ABN AMRO</span></span>
<span><span class="co">## The date of these Listing Particulars is May 26, 1998.</span></span>
<span><span class="co">##  The Republic has warranted to the Dealer that, inter alia, these Listing Particulars are true and</span></span>
<span><span class="co">## accurate in all material respects, do not contain any untrue statement of material fact nor omit to state any</span></span>
<span><span class="co">## material fact known to the Republic necessary to make statements herein not misleading and all reasonable</span></span>
<span><span class="co">## enquiries have been made to ascertain such facts and to verify the accuracy of all such statements. The</span></span>
<span><span class="co">## Republic accepts responsibility accordingly.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## No person has been authorised to give any information or to make any representations, other than</span></span>
<span><span class="co">## those contained in the Listing Particulars, in connection with the offering or sale of the Notes and, if given</span></span>
<span><span class="co">## or made, such information or representations must not be relied upon as having been authorised by the .</span></span>
<span><span class="co">## Republic or the Dealer. Neither the delivery of these Listing Particulars nor any sale made hereunder shall,</span></span>
<span><span class="co">## under any circumstances, constitute a representation that there has been no change in the financial position</span></span>
<span><span class="co">## or prospects of the Republic since the date hereof or the information contained herein is correct as of any</span></span>
<span><span class="co">## time subsequent to the date hereof.</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="read-from-tiff-files">Read from TIFF files<a class="anchor" aria-label="anchor" href="#read-from-tiff-files"></a>
</h2>
<p>If your images are stored in PDF files they first need to be converted to a proper image format. We can do this in R using the <code>pdf_convert</code> function from the <code>cpp11poppler</code> package. Use a high DPI to keep quality of the image.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"bondargentina.tiff"</span>, package <span class="op">=</span> <span class="st">"cpp11tesseract"</span><span class="op">)</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## LISTING PARTICULARS CONSISTING OF</span></span>
<span><span class="co">## Pricing Supplement, Supplemental Information Memorandum and</span></span>
<span><span class="co">## Supplemental Information Memorandum Addendum dated May 26, 1998</span></span>
<span><span class="co">## AND</span></span>
<span><span class="co">## Information Memorandum Addendum dated October 17, 1997</span></span>
<span><span class="co">## wetis</span></span>
<span><span class="co">## |</span></span>
<span><span class="co">## THE REPUBLIC OF ARGENTINA</span></span>
<span><span class="co">## Euro 750,000,000 Interest Strip Notes due 2028</span></span>
<span><span class="co">## issued under its</span></span>
<span><span class="co">## U.S.$11,000,000,000</span></span>
<span><span class="co">## EURO MEDIUM-TERM NOTE PROGRAMME |</span></span>
<span><span class="co">## Issue Price: 100.835 per cent.</span></span>
<span><span class="co">## Series No.: 61</span></span>
<span><span class="co">## Tranche No.: 01</span></span>
<span><span class="co">## Dealer</span></span>
<span><span class="co">## ABN AMRO</span></span>
<span><span class="co">## The date of these Listing Particulars is May 26, 1998.</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="tesseract-control-parameters">Tesseract Control Parameters<a class="anchor" aria-label="anchor" href="#tesseract-control-parameters"></a>
</h2>
<p>Tesseract supports hundreds of “control parameters” which alter the OCR engine Use <code><a href="../reference/tesseract.html">tesseract_params()</a></code> to list all parameters with their default value and a brief description. It also has a handy <code>filter</code> argument to quickly find parameters that match a particular string.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List all parameters with *colour* in name or description</span></span>
<span><span class="fu"><a href="../reference/tesseract.html">tesseract_params</a></span><span class="op">(</span><span class="st">"colour"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">##   param                      default desc                    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> editor_image_word_bb_color 7       Word bounding box colour</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> editor_image_blob_bb_color 4       Blob bounding box colour</span></span></code></pre>
<p>Do note that some of the control parameters have changed between Tesseract engine 3 and 4.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tesseract.html">tesseract_info</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="st">"version"</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## $version</span></span>
<span><span class="co">## [1] "5.4.1"</span></span></code></pre>
<div class="section level3">
<h3 id="whitelist-blacklist-characters">Whitelist / Blacklist characters<a class="anchor" aria-label="anchor" href="#whitelist-blacklist-characters"></a>
</h3>
<p>One powerful parameter is <code>tessedit_char_whitelist</code> which restricts the output to a limited set of characters. This may be useful for reading for example numbers such as a bank account, zip code, or gas meter.</p>
<p>The whitelist parameter works for all versions of Tesseract engine 3 and also engine versions 4.1 and higher, but unfortunately it did not work in Tesseract 4.0.</p>
<div class="figure">
<img src="../reference/figures/receipt.jpg" alt=""><p class="caption">A receipt in English with food and toys for Mr. Duke</p>
</div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"receipt.jpg"</span>, package <span class="op">=</span> <span class="st">"cpp11tesseract"</span><span class="op">)</span></span>
<span><span class="va">numbers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tesseract.html">tesseract</a></span><span class="op">(</span>options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tessedit_char_whitelist <span class="op">=</span> <span class="st">"-$.0123456789"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">file</span>, engine <span class="op">=</span> <span class="va">numbers</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 00068354712539</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 01.8$31.998</span></span>
<span><span class="co">## 25 -$8.00</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 00084019961505</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 03966$44.99</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 00003558543582</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 8 $8.93</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 00000002000414</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $0.50</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $$60$10 -$10.00</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $ $68.47</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $8.84</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $77.31</span></span></code></pre>
<p>To test if this actually works, look at the output without the whitelist:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">file</span>, engine <span class="op">=</span> <span class="va">eng</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## DOG</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 000683547 12539</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## OPEN FARM DOG AG SALMON 1.8KG $31.99 HST</span></span>
<span><span class="co">## Item discount 25% -$8.00 HST</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 00084019961505</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## VE FO GOOG BF NIB 396G LRG KONG $44.99 HST</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ACCESSORIES</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 00003558543582</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## KONG BRUSH $8.93 HST</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## STORE USE ITEMS</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 000000020004 14</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## GPF CLOTH BAG LARGE $0.50</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## FPS SPEND $60 SAVE $10 -$10.00</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## SUB TOTAL $68.47</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## HST $8.84</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## TOTAL $77.31</span></span></code></pre>
<p>As an Easter egg, this is Mr. Duke:</p>
<div class="figure">
<img src="../reference/figures/mrduke.jpg" alt=""><p class="caption">Mr. Duke, a dog of the Australian Sheppard kind</p>
</div>
<p>Here is the extracted text:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"mrduke.jpg"</span>, package <span class="op">=</span> <span class="st">"cpp11tesseract"</span><span class="op">)</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">file</span>, engine <span class="op">=</span> <span class="va">eng</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ee</span></span>
<span><span class="co">## oe e</span></span>
<span><span class="co">## Ze. &lt;n BR ee</span></span>
<span><span class="co">## Mr. Duke, 4 years old (2024) 2</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="best-versus-fast-models">Best versus Fast models<a class="anchor" aria-label="anchor" href="#best-versus-fast-models"></a>
</h2>
<p>In order to improve the OCR results, Tesseract has two variants of models that can be used. The <code><a href="../reference/tessdata.html">tesseract_download()</a></code> can download the ‘best’ (but slower) model, which increases the accuracy. The ‘fast’ (but less accurate) model is the default.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"chinese.jpg"</span>, package <span class="op">=</span> <span class="st">"cpp11tesseract"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># download the best model (vertical script download is to avoid a warning)</span></span>
<span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tessdata.html">tesseract_download</a></span><span class="op">(</span><span class="st">"chi_sim_vert"</span>, datapath <span class="op">=</span> <span class="va">dir</span>, model <span class="op">=</span> <span class="st">"best"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tessdata.html">tesseract_download</a></span><span class="op">(</span><span class="st">"chi_sim"</span>, datapath <span class="op">=</span> <span class="va">dir</span>, model <span class="op">=</span> <span class="st">"best"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># compare the results: fast (text1) vs best (text2)</span></span>
<span><span class="va">text1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">file</span>, engine <span class="op">=</span> <span class="fu"><a href="../reference/tesseract.html">tesseract</a></span><span class="op">(</span><span class="st">"chi_sim"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">text2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">file</span>, engine <span class="op">=</span> <span class="fu"><a href="../reference/tesseract.html">tesseract</a></span><span class="op">(</span><span class="st">"chi_sim"</span>, datapath <span class="op">=</span> <span class="va">dir</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="contributed-models">Contributed models<a class="anchor" aria-label="anchor" href="#contributed-models"></a>
</h2>
<p>The <code><a href="../reference/tessdata.html">tesseract_contributed_download()</a></code> function can download contributed models. For example, the <code>grc_hist</code> model is useful for Polytonic Greek. Here is an example from Sophocles’ Ajax (source: <a href="https://github.com/AjaxMultiCommentary" class="external-link">Ajax Multi-Commentary</a>)</p>
<div class="figure">
<img src="../reference/figures/polytonicgreek.png" alt=""><p class="caption">polytonicgreek</p>
</div>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"polytonicgreek.png"</span>, package <span class="op">=</span> <span class="st">"cpp11tesseract"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># download the best models</span></span>
<span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tessdata.html">tesseract_download</a></span><span class="op">(</span><span class="st">"grc"</span>, datapath <span class="op">=</span> <span class="va">dir</span>, model <span class="op">=</span> <span class="st">"best"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tessdata.html">tesseract_contributed_download</a></span><span class="op">(</span><span class="st">"grc_hist"</span>, datapath <span class="op">=</span> <span class="va">dir</span>, model <span class="op">=</span> <span class="st">"best"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># compare the results: grc (text1) vs grc_hist (text2)</span></span>
<span><span class="va">text1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">file</span>, engine <span class="op">=</span> <span class="fu"><a href="../reference/tesseract.html">tesseract</a></span><span class="op">(</span><span class="st">"grc"</span>, datapath <span class="op">=</span> <span class="va">dir</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">text2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">file</span>, engine <span class="op">=</span> <span class="fu"><a href="../reference/tesseract.html">tesseract</a></span><span class="op">(</span><span class="st">"grc_hist"</span>, datapath <span class="op">=</span> <span class="va">dir</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="comparison-with-amazon-textract">Comparison with Amazon Textract<a class="anchor" aria-label="anchor" href="#comparison-with-amazon-textract"></a>
</h2>
<p><em>Note: Amazon and Textract are trademarks of Amazon.com, Inc.</em></p>
<p>Textract <a href="https://aws.amazon.com/blogs/opensource/using-r-with-amazon-web-services-for-document-analysis/" class="external-link">documentation</a> uses page three of the <a href="https://www.philadelphiafed.org/-/media/frbp/assets/surveys-and-data/greenbook-data/greensheets/greensheets-1966.zip?la=en&amp;hash=8B8ABA92C3F0B2939328D47B6230F3A3" class="external-link">January 1966 report</a> from Philadelphia Fed’s <a href="https://www.philadelphiafed.org/surveys-and-data/real-time-data-research/philadelphia-data-set" class="external-link">Tealbook</a> (formerly Greenbook).</p>
<div class="figure">
<img src="../reference/figures/tealbook.png" alt=""><p class="caption">tealbook</p>
</div>
<p>Here is the first element of the list returned by Textract:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List of 13</span></span>
<span><span class="co"># $ BlockType      : chr "TABLE"</span></span>
<span><span class="co"># $ Confidence     : num 100</span></span>
<span><span class="co"># $ Text           : chr(0)</span></span>
<span><span class="co"># $ RowIndex       : int(0)</span></span>
<span><span class="co"># $ ColumnIndex    : int(0)</span></span>
<span><span class="co"># $ RowSpan        : int(0)</span></span>
<span><span class="co"># $ ColumnSpan     : int(0)</span></span>
<span><span class="co"># $ Geometry       :List of 2</span></span>
<span><span class="co"># .. &lt;not shown&gt;</span></span>
<span><span class="co"># $ Id             : chr "c6841638-d3e0-414b-af12-b94ed34aac8a"</span></span>
<span><span class="co"># $ Relationships  :List of 1</span></span>
<span><span class="co"># ..$ :List of 2</span></span>
<span><span class="co"># .. ..$ Type: chr "CHILD"</span></span>
<span><span class="co"># .. ..$ Ids : chr [1:256] "e1866e80-0ef0-4bdd-a6fd-9508bb833c03" ...</span></span>
<span><span class="co"># $ EntityTypes    : list()</span></span>
<span><span class="co"># $ SelectionStatus: chr(0)</span></span>
<span><span class="co"># $ Page           : int 3</span></span></code></pre></div>
<p>Here is Tesseract’s output:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"tealbook.png"</span>, package <span class="op">=</span> <span class="st">"cpp11tesseract"</span><span class="op">)</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ocr.html">ocr</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Nemes mm a a ee en e-em n an ae ee</span></span>
<span><span class="co">## Year SSC—~SSESSC~*«C</span></span>
<span><span class="co">## 1965 IV I</span></span>
<span><span class="co">## Esti- Esti- Pro-</span></span>
<span><span class="co">## 1964 __mated yi/ rr/ rrr! mated _ jected</span></span>
<span><span class="co">## Gross National Product 628.7 675.7 657.6 668.8 681.5 695.0 707.0</span></span>
<span><span class="co">## Personal consumption expenditures 398.9 428.6 416.9 424.5 432.5 440.5 447.1</span></span>
<span><span class="co">## Durable goods 58.7 65.0 64.6 63.5 65.4 66.4 66.6</span></span>
<span><span class="co">## Nondurable goods 177.5 188.8 182.8 187.9 190.5 194.0 197.6</span></span>
<span><span class="co">## Services 162.6 174.9 169.5 173,1 176.7 180.1 182.9</span></span>
<span><span class="co">## Gross private domestic investment 92.9 104.9 103.4 102.8 106.2 107.0 109.1</span></span>
<span><span class="co">## Residential construction 27.5 27.7 27.7 28.0 27.7 27.3 27.5</span></span>
<span><span class="co">## Business fixed investment 60.5 69.8 66.9 68.4 70.9 73.1 75.1</span></span>
<span><span class="co">## Change in business inventories 4.8 7.4 8.8 6.4 7.6 6.6 6.5</span></span>
<span><span class="co">## Nonfarm 5.4 7.1 9.2 6.6 7.0 5.4 5.5</span></span>
<span><span class="co">## Net exports 8.6 7.3 6.0 8.0 7.4 7.8 8.1</span></span>
<span><span class="co">## Gov. purchases of goods &amp; services 128.4 135,0 131.3 133.5 135.4 139.7 142.7</span></span>
<span><span class="co">## Federal 65.3 66.6 64.9 65.7 66.5 69.4 70.7</span></span>
<span><span class="co">## Defense 49.9 49.9 48.8 49.2 49.8 51.8 52.7</span></span>
<span><span class="co">## Other 15.4 16.7 16.1 16.5 16.7 17.6 18.0</span></span>
<span><span class="co">## State and local 63.1 68,4 66.4 67.8 68.9 70.3 72.0</span></span>
<span><span class="co">## Gross National Product in Constant 577.6 609.3 597.7 603.5 613.0 622.4 630.1</span></span>
<span><span class="co">## (1958) Dollars</span></span>
<span><span class="co">## Personal income 495.0 530.5 516.2 524.7 536.0 544.9 552.0</span></span>
<span><span class="co">## Wages and salaries 333.5 357.3 348.9 353.6 359.0 367.5 374.1</span></span>
<span><span class="co">## Farm income 12.0 14.2 12.0 14.5 15.0 15.3 15.3</span></span>
<span><span class="co">## Personal contributions for</span></span>
<span><span class="co">## social insurance (deduction) 12.4 13.2 12.9 13.0 13.3 13.6 16.6</span></span>
<span><span class="co">## Disposable personal income 435.8 465.0 451.4 458.5 471.2 478.7 485.1</span></span>
<span><span class="co">## Personal saving 26.3 24.6 23.3 22.4 26.8 26.0 25.5</span></span>
<span><span class="co">## Saving rate (per cent) 6.0 5.3 5.2 4.9 5.7 5.4 5.3</span></span>
<span><span class="co">## Total labor force (millions) 77.0 78.3 77.7. 78.2 78.5 78.9 79.6</span></span>
<span><span class="co">## Armed forces " 2.7 2.7 2.7 2.7 2.7 2.8 2.9</span></span>
<span><span class="co">## Civilian labor force " 74.2 75.6 75.0 75.5 75.8 76,1 76,7</span></span>
<span><span class="co">## Employed " 70.4 72.1 71.3 71.9 72.4 72.9 73.6</span></span>
<span><span class="co">## Unemployed " 3.9 3.5 3.6 3.6 3.4 3.2 3.1</span></span>
<span><span class="co">## Unemployment rate (per cent) 5.2 4.6 4.8 4.7 4.4 4.2 4.0</span></span></code></pre>
<p>One way to organize the output is to split the text before the first digit on each line.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">text</span>, <span class="st">"\n"</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="va">text</span><span class="op">[</span><span class="fl">6</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">firstdigit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">regexpr</a></span><span class="op">(</span><span class="st">"[0-9]"</span>, <span class="va">text</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span>  <span class="va">variable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/trimws.html" class="external-link">trimws</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">text</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="fl">1</span>, <span class="va">firstdigit</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">text</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">firstdigit</span>, <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">text</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="st">" "</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/trimws.html" class="external-link">trimws</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">","</span>, <span class="st">"."</span>, <span class="va">values</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"\\.$"</span>, <span class="st">""</span>, <span class="va">values</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">values</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">values</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">next</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">values</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"variable"</span>, <span class="st">"y1964"</span>, <span class="st">"y1965est"</span>, <span class="st">"y1965q1"</span>,</span>
<span>    <span class="st">"y1965q2"</span>, <span class="st">"y1965q3"</span>, <span class="st">"y1965q4est"</span>, <span class="st">"y1966q1pro"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                            variable y1964 y1965est y1965q1 y1965q2 y1965q3</span></span>
<span><span class="co">## 1            Gross National Product 628.7    675.7   657.6   668.8   681.5</span></span>
<span><span class="co">## 2 Personal consumption expenditures 398.9    428.6   416.9   424.5   432.5</span></span>
<span><span class="co">## 3                     Durable goods  58.7       65    64.6    63.5    65.4</span></span>
<span><span class="co">## 4                  Nondurable goods 177.5    188.8   182.8   187.9   190.5</span></span>
<span><span class="co">## 5                          Services 162.6    174.9   169.5   173.1   176.7</span></span>
<span><span class="co">## 6 Gross private domestic investment  92.9    104.9   103.4   102.8   106.2</span></span>
<span><span class="co">##   y1965q4est y1966q1pro</span></span>
<span><span class="co">## 1        695        707</span></span>
<span><span class="co">## 2      440.5      447.1</span></span>
<span><span class="co">## 3       66.4       66.6</span></span>
<span><span class="co">## 4        194      197.6</span></span>
<span><span class="co">## 5      180.1      182.9</span></span>
<span><span class="co">## 6        107      109.1</span></span></code></pre>
<p>The result is not perfect (e.g. I still need to change “Gross National Product in Constant” to add the “(1958) Dollars”), but neither is Textract’s and it requires to write a more complex loop to organize the data. Certainly, this can be simplified by using the Tidyverse.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mauricio Vargas Sepulveda, Jeroen Ooms, Munk School of Global Affairs and Public Policy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
